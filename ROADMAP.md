
# 🚀 TaskCube 开发路线图 (Roadmap)

本文档记录了 TaskCube 项目未来的架构演进方向与功能迭代计划。

## ✅ 阶段一：数据安全与基础体验 (v2.1) - [已完成]

### 1. 数据导入/导出 (Backup & Restore)
*   **状态**: ✅ 已上线
*   **功能**: 
    *   支持导出 Tasks, Projects, Rules, Settings 为 JSON 文件。
    *   支持从 JSON 文件恢复数据（覆盖模式）。

### 2. 基础 UI 适配
*   **状态**: ✅ 已上线
*   **功能**: iOS 风格设计，深色模式适配。

---

## ✅ 阶段二：架构升级 (v2.2) - [已完成]

### 3. 持久层迁移 (IndexedDB)
*   **状态**: ✅ 已上线
*   **方案**: 
    *   引入 **Dexie.js** 替代 LocalStorage。
    *   实现了 `useLiveQuery` 实时响应式数据流。
    *   支持复杂查询（按日期、项目ID索引）。

---

## 🚧 阶段三：表格视图增强与标签系统 (v2.4) - [开发中]

> **当前重点任务**: 提升列表模式下的操作效率，减少弹窗干扰。

### 4. 表格交互优化 (Table Inline Editing)
*   **目标**: 实现类似 Excel/Notion 的行内编辑体验。
*   **需求详情**:
    *   **标题列**: 点击文字才弹出完整详情框（避免误触）。
    *   **行内编辑**:
        *   **项目**: 点击项目单元格 -> 弹出下拉菜单选择/移除项目。
        *   **优先级**: 点击优先级标签 -> 弹出下拉菜单修改 (High/Medium/Low)。
        *   **四象限**: 点击象限标签 -> 弹出网格选择器修改。
        *   **日期**: 点击日期文字 -> 弹出日期选择器修改。

### 5. 标签系统 (Tag System)
*   **数据模型**: Task 新增 `tags: string[]` 字段。
*   **UI 实现**:
    *   **表格列**: 新增 "标签 (Tags)" 列。
    *   **交互**: 
        *   点击列空白处或现有标签 -> 弹出 Tag 管理器。
        *   支持输入文本按回车新增标签。
        *   点击标签旁的 `x` 删除标签。

---

## 📅 阶段四：交互深化 (v2.5) - [计划中]

### 6. 拖拽交互 (Drag & Drop)
*   **目标**: 提供直观的物理操作感。
*   **方案**:
    *   **日视图**: 长按拖动任务块修改 `startTime`，拖拽边缘修改 `duration`。
    *   **看板视图**: 在不同象限间拖拽。
    *   **列表视图**: 拖拽排序。

### 7. PWA 深度支持
*   **目标**: 完善移动端离线体验。
*   **方案**: Service Worker 缓存策略优化，安装提示优化。

---

## 🧠 阶段五：AI 2.0 (v3.0) - [远期规划]

### 8. 上下文感知 AI (Context-Aware Assistant)
*   **RAG (简易版)**: 在构建 Prompt 时，注入当前的 Context（如日程冲突检测）。
*   **每日智能简报**: 结合昨天的 `ProjectLog` 和今天的 `Tasks`，自动生成晨间简报。

---

## 🛠 待定技术债 (Tech Debt)

*   **Virtualization (虚拟列表)**: 引入 `react-window` 优化长列表渲染性能。
*   **单元测试**: 补充 `recurringService` 的测试用例。
